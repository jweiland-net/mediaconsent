{"version":3,"file":"mediaConsent.js","sources":["../../JavaScript/MediaConsentPlugin/src/assets/jweilandnet.svg","../../JavaScript/MediaConsentPlugin/src/ts/mediaConsent.ts","../../JavaScript/MediaConsentPlugin/src/main.ts"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20id='rgb_00842'%20data-name='rgb%20%2300842'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20214%2072'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23000842;}%3c/style%3e%3c/defs%3e%3ctitle%3eZeichenflÃ¤che%201%3c/title%3e%3cpath%20class='cls-1'%20d='M10,25.66h-6V45.59c0,1.45,0,3-2.14,3H1v4.57H2.49C9.09,53.21,10,50,10,45.37V25.66Zm0-6.71h-6v4.57h6V18.95Z'/%3e%3cpolygon%20class='cls-1'%20points='12.43%2025.75%2018.6%2045.89%2024.19%2045.89%2027.56%2032.86%2027.63%2032.86%2031.01%2045.89%2036.6%2045.89%2042.77%2025.75%2036.56%2025.75%2033.55%2038.27%2033.48%2038.27%2030.14%2025.75%2025.06%2025.75%2021.75%2038.27%2021.68%2038.27%2018.67%2025.75%2012.43%2025.75%2012.43%2025.75'/%3e%3cpath%20class='cls-1'%20d='M57.11,39.61a4.29,4.29,0,0,1-3.67,1.89,4.52,4.52,0,0,1-4.72-3.81h15.1a8.27,8.27,0,0,0,.14-1.6c0-6.13-4.5-11-10.63-11a10.74,10.74,0,0,0,.11,21.48,9.79,9.79,0,0,0,5.73-1.81,11.81,11.81,0,0,0,4.1-5.15Zm-8.31-6a4.76,4.76,0,0,1,9.14,0Z'/%3e%3cpath%20class='cls-1'%20d='M72.68,25.82h-6V46h6V25.82Zm0-6.71h-6v4.57h6V19.11Z'/%3e%3cpolygon%20class='cls-1'%20points='75.84%2045.92%2081.86%2045.92%2081.86%2019.07%2075.84%2019.07%2075.84%2045.92%2075.84%2045.92'/%3e%3cpath%20class='cls-1'%20d='M106.58,25.89h-6V28h-.07c-.73-1.23-2.58-2.83-5.88-2.83-5.37,0-10.12,4.14-10.12,10.74,0,5.77,3.74,10.78,10.12,10.78,2.36,0,4.86-.91,5.88-2.87h.07V46h6V25.89ZM90.5,36a5,5,0,1,1,5,5.08,5,5,0,0,1-5-5.08Z'/%3e%3cpath%20class='cls-1'%20d='M109.94,46.1h6v-11c0-1.23,0-4.21,3.45-4.21,3.16,0,3.16,2.76,3.16,4.17v11h6V33.51c0-4-1.23-5.55-2.32-6.5a8.67,8.67,0,0,0-5.15-1.74c-3.59,0-4.86,1.85-5.48,2.83h-.07V26h-5.63V46.1Z'/%3e%3cpath%20class='cls-1'%20d='M152.84,19.05h-6v8.42a7.72,7.72,0,0,0-5.92-2.4c-5.12,0-10,3.88-10,10.71,0,6.06,4,10.78,10.09,10.78,4.06,0,5.52-2,6-2.83h.07v2.18h5.73V19.05Zm-15.9,16.69a5.1,5.1,0,0,1,10.2,0A5,5,0,0,1,142,40.94a4.94,4.94,0,0,1-5-5.19Z'/%3e%3cpolygon%20class='cls-1'%20points='156.14%2046%20160.96%2046%20160.96%2041.17%20156.14%2041.17%20156.14%2046%20156.14%2046'/%3e%3cpath%20class='cls-1'%20d='M164.48,46.07H167V35.14a7.24,7.24,0,0,1,1.85-5.44,6.32,6.32,0,0,1,8.64,0,7.4,7.4,0,0,1,1.89,5.44V46.07h2.54V35.14c0-3.27-1-5.55-2.47-7a8.25,8.25,0,0,0-6.28-2.43,7.1,7.1,0,0,0-6.1,3H167V26.22h-2.54V46.07Z'/%3e%3cpath%20class='cls-1'%20d='M204,36.85a10.44,10.44,0,0,0-1.52-6.28,10.31,10.31,0,0,0-8.85-5.08,10.49,10.49,0,0,0-10.31,10.45,10.33,10.33,0,0,0,20.11,3.41h-2.69A7.53,7.53,0,0,1,193.62,44a7.89,7.89,0,0,1-7.69-7.19Zm-18.07-2.29a7.82,7.82,0,0,1,15.5,0Z'/%3e%3cpolygon%20class='cls-1'%20points='206.71%2045.97%20209.25%2045.97%20209.25%2028.4%20214%2028.4%20214%2026.11%20209.25%2026.11%20209.25%2019.11%20206.71%2019.11%20206.71%2026.11%20202.53%2026.11%20202.53%2028.4%20206.71%2028.4%20206.71%2045.97%20206.71%2045.97'/%3e%3c/svg%3e\"","// media-consent click handler\nconst mcClickHandler = (event: MouseEvent) => {\n  // Get the parent div with class mediaconsent-wrapper\n  const mcMediaConsentWrapper = (event.target as HTMLElement).closest('.mediaconsent_wrapper') as HTMLElement;\n  \n  // If the parent div exists\n  if (mcMediaConsentWrapper) {\n    // Get the data-mcuri attribute value from the parent div\n    const mcUri = mcMediaConsentWrapper.getAttribute('data-mcuri');\n\n    // If data-mcuri exists\n    if (mcUri) {\n      // Get the data-mctype from the URL\n      const mcScpType = mcMediaConsentWrapper.getAttribute('data-mctype');\n\n      // If mcScpType is not null, proceed with the reload\n      if (mcScpType) {\n        // Reload the parent div with the matching data-mctype attribute\n        mcNsp.reloadItem(mcMediaConsentWrapper);\n      } else {\n        console.warn('Warning: \"type\" parameter not found in data-mcuri attribute.');\n      }\n    } else {\n      console.error('Error: data-mcuri attribute not found in parent wrapper.');\n    }\n  } else {\n    console.error('Error: Parent wrapper with class \"mediaconsent-wrapper\" not found.');\n  }\n};\n\n// Class for handling individual media items\nclass McMediaItem {\n  private element: HTMLElement;\n\n  constructor (element: HTMLElement) {\n    this.element = element;\n  }\n\n  // Method to reload the media item\n  reload = () => {\n    // Fetch the content from the data-mcuri attribute\n    fetch(this.element.getAttribute('data-mcuri')!)\n      .then(response => {\n        // Check if the response is ok, otherwise throw an error\n        if (!response.ok) {\n          throw new Error('MediaConsent: Failed to load consent content');\n        }\n        // Return the text content of the response\n        return response.text();\n      })\n      .then(text => {\n        // Update the element's content with the fetched text\n        this.element.removeEventListener('click', mcClickHandler);\n        this.element.innerHTML = text;\n        this.element.addEventListener('click', mcClickHandler);\n      })\n      .catch(error => {\n        // Log any errors that occur during the fetch operation\n        console.error('There is a problem with the fetch operation: ', error);\n      });\n  };\n}\n\n// Namespace for media consent functionality\nconst mcNsp = {\n  // Method to reload media item\n  reloadItem: (item: HTMLElement) => {\n    const mcMediaItem = new McMediaItem(item);\n    mcMediaItem.reload();\n  }\n};\n\n// Event listener for when the DOM content is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Find all elements with name 'mcb'\n  const mcMediaCheckBoxs = document.querySelectorAll<HTMLElement>('[name=\"mcb\"]');\n  // Add click event listener to each class wrapper having 'mediaconsent-wrapper'\n  mcMediaCheckBoxs.forEach(mcMediaCheckBox => {\n    mcMediaCheckBox.addEventListener('click', mcClickHandler);\n  });\n});\n","// Import global styles\nimport './scss/style.scss';\n\n// Import assets\nimport jweilandLogo from './assets/jweilandnet.svg';\n\n// Import TypeScript files\nimport './ts/mediaConsent.ts';\n\n// Import mock browser data if environment is development\nif (process.env.NODE_ENV !== 'production') {\n  import('./mocks/browser.ts');\n}\n\n// Define root element\nconst appRoot = document.querySelector<HTMLDivElement>('#app');\n\n// Create HTML content\nconst htmlContent = `\n  <div>\n    <a href=\"https://jweiland.net/\" target=\"_blank\">\n      <img src=\"${jweilandLogo}\" class=\"logo vanilla\" alt=\"Jweiland Logo\" />\n    </a>\n    <h1>TYPO3 Extension: MediaConsent from Jweiland.net</h1>\n    <div class=\"mediaConsent\">\n      <div class=\"mediaconsent_element\">              \n        <div class=\"mediaconsent_wrapper\" \n             data-mcuri=\"/api/get-content\" \n             data-mctype=\"4\">\n          <h1>\n            <a href=\"#\">Media Consent CType</a>\n          </h1>\n          <input type=\"checkbox\" name=\"mcb\">          \n          Show content from \n        </div>\n      </div>\n    </div>\n  </div>\n`;\n\n// Set inner HTML of root element\nif (appRoot) {\n  appRoot.innerHTML = htmlContent;\n} else {\n  console.error('Root element \"#app\" not found.');\n}\n"],"names":["jweilandLogo","mcClickHandler","event","mcMediaConsentWrapper","mcNsp","McMediaItem","element","__publicField","response","text","error","item","mcMediaCheckBox","appRoot","htmlContent"],"mappings":"wKAAA,MAAeA,EAAA,suFCCTC,EAAkBC,GAAsB,CAE5C,MAAMC,EAAyBD,EAAM,OAAuB,QAAQ,uBAAuB,EAGvFC,EAEYA,EAAsB,aAAa,YAAY,EAKzCA,EAAsB,aAAa,aAAa,EAKhEC,EAAM,WAAWD,CAAqB,EAEtC,QAAQ,KAAK,8DAA8D,EAG7E,QAAQ,MAAM,0DAA0D,EAG1E,QAAQ,MAAM,oEAAoE,CAEtF,EAGA,MAAME,CAAY,CAGhB,YAAaC,EAAsB,CAF3BC,EAAA,gBAORA,EAAA,cAAS,IAAM,CAEb,MAAM,KAAK,QAAQ,aAAa,YAAY,CAAE,EAC3C,KAAiBC,GAAA,CAEZ,GAAA,CAACA,EAAS,GACN,MAAA,IAAI,MAAM,8CAA8C,EAGhE,OAAOA,EAAS,MAAK,CACtB,EACA,KAAaC,GAAA,CAEP,KAAA,QAAQ,oBAAoB,QAASR,CAAc,EACxD,KAAK,QAAQ,UAAYQ,EACpB,KAAA,QAAQ,iBAAiB,QAASR,CAAc,CAAA,CACtD,EACA,MAAeS,GAAA,CAEN,QAAA,MAAM,gDAAiDA,CAAK,CAAA,CACrE,CAAA,GAxBH,KAAK,QAAUJ,CACjB,CAyBF,CAGA,MAAMF,EAAQ,CAEZ,WAAaO,GAAsB,CACb,IAAIN,EAAYM,CAAI,EAC5B,OAAO,CACrB,CACF,EAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAEzB,SAAS,iBAA8B,cAAc,EAE7D,QAA2BC,GAAA,CAC1BA,EAAA,iBAAiB,QAASX,CAAc,CAAA,CACzD,CACH,CAAC,ECjED,MAAMY,EAAU,SAAS,cAA8B,MAAM,EAGvDC,EAAc;AAAA;AAAA;AAAA,kBAGFd,CAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoB1Ba,EACFA,EAAQ,UAAYC,EAEpB,QAAQ,MAAM,gCAAgC"}